{"version":3,"file":"Dropzone.js","sources":["../src/Dropzone.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  useDropzone,\n  FileRejection,\n  Accept,\n  FileWithPath,\n  DropEvent,\n  FileError,\n} from 'react-dropzone';\nimport {\n  DefaultProps,\n  Selectors,\n  MantineNumberSize,\n  LoadingOverlay,\n  Box,\n  useComponentDefaultProps,\n} from '@mantine/core';\nimport { assignRef } from '@mantine/hooks';\nimport { ForwardRefWithStaticComponents } from '@mantine/utils';\nimport { DropzoneProvider } from './Dropzone.context';\nimport { DropzoneAccept, DropzoneIdle, DropzoneReject } from './DropzoneStatus';\nimport type { DropzoneFullScreenType } from './DropzoneFullScreen';\nimport useStyles from './Dropzone.styles';\n\nexport type DropzoneStylesNames = Selectors<typeof useStyles>;\n\nexport interface DropzoneProps\n  extends DefaultProps<DropzoneStylesNames>,\n    Omit<React.ComponentPropsWithRef<'div'>, 'onDrop'> {\n  /** Padding from theme.spacing, or number to set padding in px */\n  padding?: MantineNumberSize;\n\n  /** Border radius from theme.radius or number to set border-radius in px */\n  radius?: MantineNumberSize;\n\n  /** Dropzone statues */\n  children: React.ReactNode;\n\n  /** Disable files capturing */\n  disabled?: boolean;\n\n  /** Called when any files are dropped into dropzone */\n  onDropAny?(files: FileWithPath[], fileRejections: FileRejection[]): void;\n\n  /** Called when valid files are dropped into dropzone */\n  onDrop(files: FileWithPath[]): void;\n\n  /** Called when selected files don't meet file restrictions */\n  onReject?(fileRejections: FileRejection[]): void;\n\n  /** Display loading overlay over dropzone */\n  loading?: boolean;\n\n  /** File types to accept  */\n  accept?: Accept | string[];\n\n  /** Get open function as ref */\n  openRef?: React.ForwardedRef<() => void | undefined>;\n\n  /** Allow selection of multiple files */\n  multiple?: boolean;\n\n  /** Set maximum file size in bytes */\n  maxSize?: number;\n\n  /** Name of the form control. Submitted with the form as part of a name/value pair. */\n  name?: string;\n\n  /** Number of files that user can pick */\n  maxFiles?: number;\n\n  /** Set to true to autofocus the root element */\n  autoFocus?: boolean;\n\n  /** If false, disables click to open the native file selection dialog */\n  activateOnClick?: boolean;\n\n  /** If false, disables drag 'n' drop */\n  activateOnDrag?: boolean;\n\n  /** If false, disables Space/Enter to open the native file selection dialog. Note that it also stops tracking the focus state. */\n  activateOnKeyboard?: boolean;\n\n  /** If false, stops drag event propagation to parents */\n  dragEventsBubbling?: boolean;\n\n  /** Called when the `dragenter` event occurs */\n  onDragEnter?(event: React.DragEvent<HTMLElement>): void;\n\n  /** Called when the `dragleave` event occurs */\n  onDragLeave?(event: React.DragEvent<HTMLElement>): void;\n\n  /** Called when the `dragover` event occurs */\n  onDragOver?(event: React.DragEvent<HTMLElement>): void;\n\n  /** Called when user closes the file selection dialog with no selection */\n  onFileDialogCancel?(): void;\n\n  /** Called when user opens the file selection dialog */\n  onFileDialogOpen?(): void;\n\n  /** If false, allow dropped items to take over the current browser window */\n  preventDropOnDocument?: boolean;\n\n  /** Set to true to use the File System Access API to open the file picker instead of using an <input type=\"file\"> click event, defaults to true */\n  useFsAccessApi?: boolean;\n\n  /** Use this to provide a custom file aggregator */\n  getFilesFromEvent?: (event: DropEvent) => Promise<Array<File | DataTransferItem>>;\n\n  /** Custom validation function. It must return null if there's no errors. */\n  validator?: <T extends File>(file: T) => FileError | FileError[] | null;\n}\n\nexport const defaultProps: Partial<DropzoneProps> = {\n  padding: 'md',\n  loading: false,\n  multiple: true,\n  maxSize: Infinity,\n  autoFocus: false,\n  activateOnClick: true,\n  activateOnDrag: true,\n  dragEventsBubbling: true,\n  activateOnKeyboard: true,\n  useFsAccessApi: true,\n};\n\nexport function _Dropzone(props: DropzoneProps) {\n  const {\n    className,\n    padding,\n    radius,\n    disabled,\n    classNames,\n    styles,\n    loading,\n    multiple,\n    maxSize,\n    accept,\n    children,\n    onDropAny,\n    onDrop,\n    onReject,\n    openRef,\n    name,\n    unstyled,\n    maxFiles,\n    autoFocus,\n    activateOnClick,\n    activateOnDrag,\n    dragEventsBubbling,\n    activateOnKeyboard,\n    onDragEnter,\n    onDragLeave,\n    onDragOver,\n    onFileDialogCancel,\n    onFileDialogOpen,\n    preventDropOnDocument,\n    useFsAccessApi,\n    getFilesFromEvent,\n    validator,\n    ...others\n  } = useComponentDefaultProps('Dropzone', defaultProps, props);\n\n  const { classes, cx } = useStyles(\n    { radius, padding },\n    { classNames, styles, unstyled, name: 'Dropzone' }\n  );\n\n  const { getRootProps, getInputProps, isDragAccept, isDragReject, open } = useDropzone({\n    onDrop: onDropAny,\n    onDropAccepted: onDrop,\n    onDropRejected: onReject,\n    disabled: disabled || loading,\n    accept: Array.isArray(accept) ? accept.reduce((r, key) => ({ ...r, [key]: [] }), {}) : accept,\n    multiple,\n    maxSize,\n    maxFiles,\n    autoFocus,\n    noClick: !activateOnClick,\n    noDrag: !activateOnDrag,\n    noDragEventsBubbling: !dragEventsBubbling,\n    noKeyboard: !activateOnKeyboard,\n    onDragEnter,\n    onDragLeave,\n    onDragOver,\n    onFileDialogCancel,\n    onFileDialogOpen,\n    preventDropOnDocument,\n    useFsAccessApi,\n    validator,\n    ...(getFilesFromEvent ? { getFilesFromEvent } : null),\n  });\n\n  assignRef(openRef, open);\n\n  const isIdle = !isDragAccept && !isDragReject;\n\n  return (\n    <DropzoneProvider value={{ accept: isDragAccept, reject: isDragReject, idle: isIdle }}>\n      <Box\n        {...others}\n        {...getRootProps()}\n        data-accept={isDragAccept || undefined}\n        data-reject={isDragReject || undefined}\n        data-idle={isIdle || undefined}\n        data-loading={loading || undefined}\n        className={cx(classes.root, className)}\n      >\n        <LoadingOverlay visible={loading} radius={radius} unstyled={unstyled} />\n        <input {...getInputProps()} name={name} />\n        <div className={classes.inner}>{children}</div>\n      </Box>\n    </DropzoneProvider>\n  );\n}\n\n_Dropzone.displayName = '@mantine/dropzone/Dropzone';\n_Dropzone.Accept = DropzoneAccept;\n_Dropzone.Reject = DropzoneReject;\n_Dropzone.Idle = DropzoneIdle;\n\nexport const Dropzone: ForwardRefWithStaticComponents<\n  DropzoneProps,\n  {\n    Accept: typeof DropzoneAccept;\n    Reject: typeof DropzoneReject;\n    Idle: typeof DropzoneIdle;\n    FullScreen: DropzoneFullScreenType;\n  }\n> = _Dropzone as any;\n"],"names":[],"mappings":"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"}